<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="robots" content="index, follow">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#355588">
    <meta name="description" content="해례 (Haerye) - Korean Learning PWA">
    <meta name="description" content="Best free way to learn Korean for beginners on Haerye, a zero-install web app site. Master Hangul and grammar in 11 languages. Start learning on the web now!">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Haerye | Best Free Korean Learning Web App for Beginners">
    <meta property="og:description" content="Experience the best free way to learn Korean for beginners on a dedicated web platform. No install needed. Supporting 11 languages from Hangul to grammar.">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Haerye">
	<!-- SEO -->
	<!-- Clarity tracking code for https://www.haerye.com/ -->
<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "unv1hd514q");
</script>
	<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SR0XC77BE9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SR0XC77BE9');
</script>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>해례 (Haerye)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500;700;900&family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/base/variables.css">
    <link rel="stylesheet" href="css/base/layout.css">
    <link rel="stylesheet" href="css/components/header.css">
    <link rel="stylesheet" href="css/components/sidebar.css">
    <link rel="stylesheet" href="css/base/main.css">
    <link rel="stylesheet" href="css/pages/stats-trend.css">
    <link rel="stylesheet" href="css/pages/stats.css">
	<link rel="stylesheet" href="css/pages/stats-mastery.css">
	<link rel="stylesheet" href="css/pages/stats-grammar-heat.css">
	<link rel="stylesheet" href="css/pages/stats-recommend.css">
    <link rel="stylesheet" href="css/components/components.base.css">
    <link rel="stylesheet" href="css/components/components.sections.css">
    <link rel="stylesheet" href="css/components/components.modals.css">
    <link rel="stylesheet" href="css/components/components.language-modal.css">
    <link rel="stylesheet" href="css/components/components.settings.css">
    <link rel="stylesheet" href="css/pages/grammar.css">
    <link rel="stylesheet" href="css/pages/home-main.css">
<style>

    /* Promo Modal Styles */
    .promo-modal{position:fixed;inset:0;display:none;z-index:9999}
    .promo-modal.is-open{display:block}
    .promo-modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.55)}
    .promo-modal__dialog{
      position:relative;
      max-width:520px;
      margin:10vh auto 0;
      background:#fff;
      border-radius:18px;
      padding:22px 20px 18px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .promo-modal__close{
      position:absolute;top:10px;right:12px;
      width:36px;height:36px;border:0;background:transparent;
      font-size:26px;line-height:36px;cursor:pointer
    }
    .promo-modal__title{margin:0 0 10px;font-size:20px}
    .promo-modal__desc{margin:0 0 14px;line-height:1.4}
    .promo-modal__bullets{margin:0 0 14px;padding-left:18px}
    .promo-modal__codeWrap{display:flex;gap:10px;align-items:center;margin:10px 0 16px}
    .promo-modal__code{
      padding:8px 10px;border-radius:10px;background:#f3f4f6;
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:14px;
    }
    .promo-modal__btnRow{display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap}
    .promo-modal__btn{
      padding:10px 14px;border-radius:12px;border:1px solid rgba(0,0,0,.12);
      background:#fff;cursor:pointer
    }
    .promo-modal__btn--primary{background:#111;color:#fff;border-color:#111}
    .promo-modal__note{margin:10px 0 0;font-size:12px;opacity:.75}

</style>
</head>
<body>
    <div class="pc-wrapper">
        <div class="app-container">
            <!-- Header -->
            <div id="header-container" style="min-height: 80px;"></div>

            <main class="app-main">
                <!-- ★ 신규: 홈 메인 섹션 추가 ★ -->
                <section id="home-main-section" class="content-section" style="display: none;">
                    <!-- JavaScript로 동적 렌더링됨 (HomeMainRenderer) -->
                </section>

                <!-- ★ 신규: 학습 메뉴 컨테이너 추가 ★ -->
                <div id="learn-container" class="content-section" style="display: none;">
                    <!-- JavaScript로 동적 렌더링됨 (LearnRenderer) -->
                </div>

                <!-- Home Dashboard -->
                <div id="home-container" style="min-height: 200px;">
                    <!-- Fallback Content -->
                    <div style="text-align: center; padding: 2rem; color: #999;">
                        <div class="loading"></div> Loading...
                    </div>
                </div>

                <!-- Content Sections -->
                <section id="hangul-section" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>한글 배우기</h2>
                        <button class="close-btn" onclick="showWelcome()">✖</button>
                    </div>
                    <div id="hangul-container" class="hangul-container"></div>
                </section>

                <section id="vocabulary-section" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>단어장</h2>
                        <button class="close-btn" onclick="showWelcome()">✖</button>
                    </div>
                    <div id="vocabulary-container" class="vocabulary-container"></div>
                </section>

                <section id="flashcard-section" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>플래시카드</h2>
                        <button class="close-btn" onclick="showWelcome()">✖</button>
                    </div>
                    <div id="flashcard-container" class="flashcard-container"></div>
                </section>

                <section id="grammar-section" class="content-section" style="display: none;">
                    <div class="section-header">
                        <h2>문법</h2>
                        <button class="close-btn" onclick="showWelcome()">✖</button>
                    </div>
                    <div id="grammar-container" class="grammar-container"></div>
                </section>

                <section class="welcome-section" style="display: none;"></section>
            </main>

            <!-- Navigation -->
            <div id="nav-container"></div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal-container"></div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="i18n.js"></script>
    <script src="js/core/theme.js"></script>
    <script src="js/features/speech.js"></script>
    <script src="js/core/settings.js"></script> <!-- Settings 먼저 로드 -->
    <script src="js/core/date-utils.js"></script>
    <script src="js/core/learning-progress.model.js"></script>
    <script src="js/core/learning-progress.storage.js"></script>
    <script src="js/core/learning-progress.runtime.js"></script>
    <script src="js/core/stats-log-manager.js"></script>
    <script src="js/core/app.js"></script>

    <!-- Renderers -->
    <script src="js/renderers/header-renderer.flags.js"></script>
    <script src="js/renderers/header-renderer.view.js"></script>
    <script src="js/renderers/header-renderer.progress.js"></script>
    <script src="js/renderers/nav-renderer.js"></script>
    <script src="js/renderers/home-renderer.js"></script>
    <!-- ★ 신규: 홈 메인 렌더러 추가 ★ -->
    <script src="js/renderers/home-main-renderer.js"></script>
    <script src="js/renderers/learn-renderer.js"></script>
    <script src="js/renderers/modal-renderer.js"></script>

    <!-- Logic Modules -->
    <script src="js/features/hangul-learning.js"></script>
    <script src="js/features/vocabulary-learning.js"></script>
    <script src="js/features/grammar-data.js"></script>
    <script src="js/features/grammar-view.js"></script>
    <script src="js/features/grammar-ui.js"></script>
    <script src="js/features/flashcard.js"></script>

    <!-- Managers (New) -->
    <script src="js/core/language-manager.js"></script>

    <!-- Modal System (Refactored) -->
    <script src="js/features/modal-interaction.js"></script>
    <script src="js/features/modal-settings-logic.js"></script>
    <script src="js/features/modal-manager.js"></script>

    <!-- Controller (Main) -->
    <script src="js/core/ui-manager.js"></script>

    <!-- Scroll to Top Button (독립적) -->
    <script src="js/features/scroll-button.js"></script>

    <!-- Promo Modal -->
    <div id="promoModal" class="promo-modal" aria-hidden="true">
      <div class="promo-modal__backdrop" data-promo-close></div>
      <div class="promo-modal__dialog" role="dialog" aria-modal="true" aria-label="Launch promotion">
        <button class="promo-modal__close" type="button" data-promo-close aria-label="Close">×</button>

        <h2 class="promo-modal__title">Launch Promotion</h2>
        <p class="promo-modal__desc">
          Word + Grammar + AI, pronunciation practice, dictation + member features
        </p>

        <ul class="promo-modal__bullets">
          <li>10-minute free trial</li>
          <li>First 30 users: 30% off</li>
        </ul>

        <div class="promo-modal__codeWrap">
          <span class="promo-modal__code" id="promoCode" aria-label="Coupon code">IXNTA1OQ</span>
          <button class="promo-modal__btn" id="promoCopyBtn" type="button">Copy coupon</button>
        </div>

        <div class="promo-modal__btnRow">
          <button class="promo-modal__btn" type="button" data-promo-close>Not now</button>
          <button class="promo-modal__btn promo-modal__btn--primary" id="promoGoBtn" type="button">
            Start free trial
          </button>
        </div>

        <p class="promo-modal__note">
          You will be redirected to the app.
        </p>
      </div>
    </div>

    <script>
      // Show promo modal once per session (after 2 minutes)
      (function () {
        const DELAY_MS = 120000;
        const SESSION_KEY = "haerye_promo_shown";
        const REDIRECT_URL = "https://app.haerye.com/";

        const modal = document.getElementById("promoModal");
        if (!modal) return;

        const openModal = () => {
          modal.classList.add("is-open");
          modal.setAttribute("aria-hidden", "false");
        };

        const closeModal = () => {
          modal.classList.remove("is-open");
          modal.setAttribute("aria-hidden", "true");
        };

        modal.addEventListener("click", (e) => {
          if (e.target && e.target.matches("[data-promo-close]")) {
            closeModal();
          }
        });

        const copyBtn = document.getElementById("promoCopyBtn");
        const codeEl = document.getElementById("promoCode");
        if (copyBtn && codeEl) {
          copyBtn.addEventListener("click", async () => {
            const code = (codeEl.textContent || "").trim();
            try {
              await navigator.clipboard.writeText(code);
              const prev = copyBtn.textContent;
              copyBtn.textContent = "Copied!";
              setTimeout(() => { copyBtn.textContent = prev; }, 1200);
            } catch (err) {
              try {
                const range = document.createRange();
                range.selectNodeContents(codeEl);
                const sel = window.getSelection();
                sel.removeAllRanges();
                sel.addRange(range);
                alert("Copy failed. The code is selected—please copy it manually.");
              } catch (e2) {
                alert("Copy failed. Please copy the coupon code manually.");
              }
            }
          });
        }

        const goBtn = document.getElementById("promoGoBtn");
        if (goBtn) {
          goBtn.addEventListener("click", () => {
            window.location.href = REDIRECT_URL;
          });
        }

        if (sessionStorage.getItem(SESSION_KEY) === "1") return;

        setTimeout(() => {
          openModal();
          sessionStorage.setItem(SESSION_KEY, "1");
        }, DELAY_MS);
      })();
    </script>

</body>
</html>
